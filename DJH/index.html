<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>הכו את לביא</title>
  <style>
    :root {
      --bg1: 255 255 255;
      --bg2: 230 240 255;
      --ink: 20 28 38;
      --brand: 59 130 246;
      --accent: 99 102 241;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", Helvetica, Arial;
      color: rgb(var(--ink));
      background: radial-gradient(1200px 800px at 50% -10%, rgb(var(--bg2)), rgb(var(--bg1)) 60%);
    }

    .card {
      width: min(92vw, 780px);
      padding: clamp(16px, 3vw, 28px);
      border-radius: 24px;
      background: #fff;
      box-shadow: 0 20px 60px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.06);
      display: grid;
      gap: clamp(12px, 2vw, 18px);
      justify-items: center;
      text-align: center;
    }

    h1 {
      margin: 0;
      font-size: clamp(28px, 4.2vw, 44px);
      font-weight: 800;
      background: linear-gradient(90deg, rgb(var(--brand)), rgb(var(--accent)));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    p.sub { margin: 0; opacity: .75; font-size: clamp(14px, 2.4vw, 16px); }

    .counter {
      font-size: clamp(16px, 2.5vw, 20px);
      font-weight: bold;
      color: rgb(var(--accent));
      margin-top: 6px;
    }

    .img-wrap {
      position: relative;
      width: min(88vw, 520px);
      aspect-ratio: 1 / 1;
      display: grid;
      place-items: center;
      border-radius: 24px;
      overflow: hidden;
      background: linear-gradient(135deg, rgba(59,130,246,.08), rgba(99,102,241,.08));
      border: 1px solid rgba(0,0,0,.06);
    }

    img#target {
      width: 100%;
      height: 100%;
      object-fit: cover;
      user-select: none;
      -webkit-user-drag: none;
      cursor: pointer;
      transition: transform .18s ease, filter .18s ease;
      transform-origin: center;
    }
    .img-wrap:hover img#target { transform: scale(1.02); filter: saturate(1.05); }

    @keyframes thwack {
      0% { transform: scale(1) rotate(0deg); }
      12% { transform: scale(.94) rotate(-1deg); }
      28% { transform: scale(1.08) rotate(1.2deg); }
      48% { transform: scale(.98) rotate(-.6deg); }
      70% { transform: scale(1.02) rotate(.3deg); }
      100% { transform: scale(1) rotate(0deg); }
    }
    img#target.hit { animation: thwack .4s cubic-bezier(.2,.7,.2,1); }

    .ripple {
      position: absolute;
      width: 24px; height: 24px;
      border-radius: 999px;
      border: 3px solid rgba(59,130,246,.8);
      pointer-events: none;
      transform: translate(-50%, -50%) scale(0);
      opacity: .9;
      animation: ripple .5s ease-out forwards;
      filter: drop-shadow(0 2px 6px rgba(59,130,246,.35));
    }
    @keyframes ripple { to { transform: translate(-50%, -50%) scale(12); opacity: 0; } }

    .pow {
      position: absolute;
      transform: translate(-50%, -50%) scale(0.6);
      padding: 6px 10px;
      background: linear-gradient(90deg, rgb(var(--brand)), rgb(var(--accent)));
      color: white;
      border-radius: 999px;
      font-weight: 800;
      font-size: clamp(10px, 2.4vw, 14px);
      box-shadow: 0 6px 16px rgba(0,0,0,.18);
      pointer-events: none;
      animation: pop .45s ease-out forwards;
    }
    @keyframes pop {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(.4) rotate(-8deg); }
      35% { opacity: 1; transform: translate(-50%, -50%) scale(1.05) rotate(3deg); }
      100% { opacity: 0; transform: translate(-50%, -50%) scale(.9) rotate(0deg); }
    }

    footer { margin-top: 6px; font-size: 12px; opacity: .55; }
  </style>
</head>
<body>
  <main class="card" aria-labelledby="title">
    <h1 id="title">הכו את לביא</h1>
    <p class="sub">לחצו על התמונה כדי להפעיל את האנימציה</p>
    <p class="counter">מספר מכות: <span id="count">0</span></p>

    <div class="img-wrap" id="wrap">
      <img id="target" src="LAVI.png" alt="לביא" />
    </div>

    <footer>טיפ: שים את הקובץ בשם LAVI.png באותה תיקיה</footer>
  </main>

  <script>
    const img = document.getElementById('target');
    const wrap = document.getElementById('wrap');
    const counter = document.getElementById('count');
    let hits = 0;

    function spawnRipple(x, y) {
      const r = document.createElement('span');
      r.className = 'ripple';
      r.style.left = x + 'px';
      r.style.top  = y + 'px';
      wrap.appendChild(r);
      r.addEventListener('animationend', () => r.remove());
    }

    function spawnPow(x, y) {
      const tag = document.createElement('span');
      tag.className = 'pow';
      tag.textContent = 'בום!';
      tag.style.left = x + 'px';
      tag.style.top  = y + 'px';
      wrap.appendChild(tag);
      tag.addEventListener('animationend', () => tag.remove());
    }

    function updateCounter() {
      hits++;
      counter.textContent = hits;
    }

    function clickAnimation(e) {
      img.classList.remove('hit');
      void img.offsetWidth;
      img.classList.add('hit');

      const rect = wrap.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      spawnRipple(x, y);
      spawnPow(x, y);
      updateCounter();
    }

    wrap.addEventListener('click', clickAnimation);
    wrap.addEventListener('touchstart', (ev) => {
      const t = ev.touches[0];
      if (!t) return;
      const rect = wrap.getBoundingClientRect();
      const x = t.clientX - rect.left;
      const y = t.clientY - rect.top;
      img.classList.remove('hit');
      void img.offsetWidth;
      img.classList.add('hit');
      spawnRipple(x, y);
      spawnPow(x, y);
      updateCounter();
    }, { passive: true });
  </script>
</body>
</html>
